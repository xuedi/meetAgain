<div class="navbar-item dropdown is-hoverable pl-0">
    <div class="dropdown-trigger is-hoverable">
        <div class="button" aria-haspopup="true" aria-controls="dropdown-languages">
            <span class="image is-32x32 mt-3">
                <img class="is-flag" src="{{ asset('images/flags/' ~ app.request.locale ~ '.png') }}"  alt="Current locale flag"/>
            </span>
            <span class="icon is-small"><i class="fas fa-angle-down" aria-hidden="true"></i></span>
        </div>
    </div>
    {% if app.request.attributes.get('_route_params') is not null %}
        <div class="dropdown-menu" id="dropdown-languages" role="menu">
            <div class="dropdown-content">
                {% for enabledLocale in app.enabled_locales %}
                    {% if enabledLocale != app.request.locale %}
                        <nobr>
                            {% set attributes = app.request.attributes.get('_route_params') | merge({'_locale': enabledLocale}) %}
                            {% set link = path(app.request.attributes.get('_route'),  attributes) %}
                            <a class="navbar-item" href="{{ link }}">
                                <figure class="image is-32x32 mt-3">
                                    <img class="is-flag" src="{{ asset('images/flags/' ~ enabledLocale ~ '.png') }}"  alt="Locale flag"/>
                                </figure>
                                <span class="ml-3">
                                    {{ ('language_'~enabledLocale) | trans({}, "messages", enabledLocale) }}
                                </span>
                                <span class="ml-2 has-text-grey">
                                    ({{ ('language_'~enabledLocale) | trans }})
                                </span>
                            </a>
                        </nobr>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>